<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vuepress 搭建静态博客全攻略 | 去冲浪鸭</title>
    <meta name="description" content="耶耶耶耶耶✌️">
    <link rel="icon" href="/notes/touxiang.png">
    
    <link rel="preload" href="/notes/assets/css/0.styles.ce8f0f9a.css" as="style"><link rel="preload" href="/notes/assets/js/app.113899e4.js" as="script"><link rel="preload" href="/notes/assets/js/2.7a0e0dff.js" as="script"><link rel="preload" href="/notes/assets/js/20.ece02ac5.js" as="script"><link rel="preload" href="/notes/assets/js/3.d364b134.js" as="script"><link rel="prefetch" href="/notes/assets/js/10.1d6aa3c0.js"><link rel="prefetch" href="/notes/assets/js/11.dd38da28.js"><link rel="prefetch" href="/notes/assets/js/12.26832704.js"><link rel="prefetch" href="/notes/assets/js/13.76775581.js"><link rel="prefetch" href="/notes/assets/js/14.e016cb06.js"><link rel="prefetch" href="/notes/assets/js/15.97975db7.js"><link rel="prefetch" href="/notes/assets/js/16.ec3a4fdc.js"><link rel="prefetch" href="/notes/assets/js/17.ef59d70d.js"><link rel="prefetch" href="/notes/assets/js/18.f4c58e52.js"><link rel="prefetch" href="/notes/assets/js/19.a94b1184.js"><link rel="prefetch" href="/notes/assets/js/21.3126a489.js"><link rel="prefetch" href="/notes/assets/js/4.c286d9b3.js"><link rel="prefetch" href="/notes/assets/js/5.12aec717.js"><link rel="prefetch" href="/notes/assets/js/6.e9a80fbc.js"><link rel="prefetch" href="/notes/assets/js/7.eecef3d4.js"><link rel="prefetch" href="/notes/assets/js/8.27c1b657.js"><link rel="prefetch" href="/notes/assets/js/9.b83a747c.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.ce8f0f9a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes/" class="home-link router-link-active"><!----> <span class="site-name">去冲浪鸭</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="知识库" class="dropdown-title"><span class="title">知识库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/knowledge/javascript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/notes/knowledge/graphql/" class="nav-link">Graphql</a></li><li class="dropdown-item"><!----> <a href="/notes/knowledge/react/" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/notes/knowledge/http/" class="nav-link">网络请求</a></li></ul></div></div><div class="nav-item"><a href="/notes/tool/tools/" class="nav-link router-link-active">工具</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="阅读" class="dropdown-title"><span class="title">阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/essay/docs/" class="nav-link">优质文章记录</a></li><li class="dropdown-item"><!----> <a href="/notes/essay/notes/" class="nav-link">读书笔记</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="我的其他主页" class="dropdown-title"><span class="title">我的其他主页</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://juejin.im/user/5b446be0f265da0f793a56e4/posts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/settings/yizhen.fan/packages" target="_blank" rel="noopener noreferrer" class="nav-link external">
  NPM
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/fyz1994" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/fyz1994/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="知识库" class="dropdown-title"><span class="title">知识库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/knowledge/javascript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/notes/knowledge/graphql/" class="nav-link">Graphql</a></li><li class="dropdown-item"><!----> <a href="/notes/knowledge/react/" class="nav-link">React</a></li><li class="dropdown-item"><!----> <a href="/notes/knowledge/http/" class="nav-link">网络请求</a></li></ul></div></div><div class="nav-item"><a href="/notes/tool/tools/" class="nav-link router-link-active">工具</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="阅读" class="dropdown-title"><span class="title">阅读</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/essay/docs/" class="nav-link">优质文章记录</a></li><li class="dropdown-item"><!----> <a href="/notes/essay/notes/" class="nav-link">读书笔记</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="我的其他主页" class="dropdown-title"><span class="title">我的其他主页</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://juejin.im/user/5b446be0f265da0f793a56e4/posts" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.npmjs.com/settings/yizhen.fan/packages" target="_blank" rel="noopener noreferrer" class="nav-link external">
  NPM
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/fyz1994" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/fyz1994/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>工具</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/tool/tools/Vuepress 搭建博客全攻略.html" class="active sidebar-link">Vuepress 搭建静态博客全攻略</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/tool/tools/Vuepress 搭建博客全攻略.html#vuepress-搭建静态博客" class="sidebar-link">Vuepress 搭建静态博客</a></li><li class="sidebar-sub-header"><a href="/notes/tool/tools/Vuepress 搭建博客全攻略.html#github-actions-自动构建-部署" class="sidebar-link">GitHub Actions 自动构建/部署</a></li><li class="sidebar-sub-header"><a href="/notes/tool/tools/Vuepress 搭建博客全攻略.html#给-vuepress-博客加上评论系统" class="sidebar-link">给 Vuepress 博客加上评论系统</a></li><li class="sidebar-sub-header"><a href="/notes/tool/tools/Vuepress 搭建博客全攻略.html#给-vuepress-博客加上全文搜索" class="sidebar-link">给 Vuepress 博客加上全文搜索</a></li><li class="sidebar-sub-header"><a href="/notes/tool/tools/Vuepress 搭建博客全攻略.html#给-vuepress-博客做-seo-优化" class="sidebar-link">给 Vuepress 博客做 SEO 优化</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vuepress-搭建静态博客全攻略"><a href="#vuepress-搭建静态博客全攻略" class="header-anchor">#</a> Vuepress 搭建静态博客全攻略</h1> <p></p><div class="table-of-contents"><ul><li><a href="#vuepress-搭建静态博客">Vuepress 搭建静态博客</a><ul><li><a href="#_1-安装-vuepress">1. 安装 Vuepress</a></li><li><a href="#_2-初始化博客项目">2. 初始化博客项目</a></li><li><a href="#_3-进一步的配置">3. 进一步的配置</a></li><li><a href="#_4-部署">4. 部署</a></li></ul></li><li><a href="#github-actions-自动构建-部署">GitHub Actions 自动构建/部署</a><ul><li><a href="#写-workflow-脚本">写 workflow 脚本</a></li><li><a href="#设置-workflow-的环境变量">设置 workflow 的环境变量</a></li><li><a href="#注意事项：">注意事项：</a></li></ul></li><li><a href="#给-vuepress-博客加上评论系统">给 Vuepress 博客加上评论系统</a></li><li><a href="#给-vuepress-博客加上全文搜索">给 Vuepress 博客加上全文搜索</a></li><li><a href="#给-vuepress-博客做-seo-优化">给 Vuepress 博客做 SEO 优化</a></li></ul></div><p></p> <h2 id="vuepress-搭建静态博客"><a href="#vuepress-搭建静态博客" class="header-anchor">#</a> Vuepress 搭建静态博客</h2> <p>可以参照 <a href="https://vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">Vuepress 的官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 一步一步来就好了😊，我这里就简单说下步骤：</p> <h3 id="_1-安装-vuepress"><a href="#_1-安装-vuepress" class="header-anchor">#</a> 1. 安装 Vuepress</h3> <p>你可以全局安装：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 可以使用 npm 来全局安装</span>
<span class="token function">npm</span> i -g Vuepress

<span class="token comment"># 也可以使用 yarn 来全局安装</span>
<span class="token function">yarn</span> global <span class="token function">add</span> Vuepress
</code></pre></div><p>也可以安装在你静态博客项目的开发依赖里面:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> --dev Vuepress

<span class="token comment"># 或者</span>
<span class="token function">npm</span> i -D Vuepress
</code></pre></div><h3 id="_2-初始化博客项目"><a href="#_2-初始化博客项目" class="header-anchor">#</a> 2. 初始化博客项目</h3> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 可以使用 npm 来初始化项目</span>
<span class="token function">npm</span> init

<span class="token comment"># 也可以使用 yarn 来初始化项目</span>
<span class="token function">yarn</span> init
</code></pre></div><p>然后在项目的根目录下新建一个 <code>docs</code> 文件夹，以后我们写的 <code>markdown</code> 文件都会放在 <code>docs</code> 文件夹下。</p> <p>我们先随便初始化一个文件来看看效果：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token builtin class-name">echo</span> <span class="token string">'# Hello VuePress!'</span> <span class="token operator">&gt;</span> docs/README.md
</code></pre></div><p>执行命令 <code>vuepress dev docs</code></p> <p>可以看到启动了一个页面：
<img src="https://user-images.githubusercontent.com/16002911/69302580-11496e80-0c55-11ea-973b-539c0cd73c65.png" alt="image"></p> <p>为了后续运行方便，我们可以把这些命令写在项目的 <code>package.json</code> 文件里面的 <code>scripts</code>：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress dev docs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress build docs&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-进一步的配置"><a href="#_3-进一步的配置" class="header-anchor">#</a> 3. 进一步的配置</h3> <p>目前我们只写了一个 <code>markdown</code> 文档，所以只有一个页面，后续我们的博客会陆续加入很多内容，肯定需要做目录分级，配置导航栏，可以看<a href="https://vuepress.vuejs.org/zh/theme/default-theme-config.html#%E9%A6%96%E9%A1%B5" target="_blank" rel="noopener noreferrer">文档里的这部分<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="_4-部署"><a href="#_4-部署" class="header-anchor">#</a> 4. 部署</h3> <p>静态博客搭好了，我们就可以把它部署到服务器上正式给别人访问了，你可以使用 GitHub Pages（GitHub 的静态页面托管服务 ）来托管自己的静态博客。
我们可以使用 <a href="https://www.npmjs.com/package/gh-pages" target="_blank" rel="noopener noreferrer">gh-pages<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来将打包好的静态博客快速部署到 GitHub Pages 上。</p> <p>同样的，我们可以将部署的命令加入到 <code>package.json</code> 文件里面的 <code>scripts</code>，现在，我们的 <code>scripts</code> 就是这样的：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress dev docs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress build docs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;deploy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run build &amp;&amp; gh-pages -d docs/.vuepress/dist&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>也可以使用其他第三方静态页面托管服务（如 Netlify、Coding Pages、Gitlab Pages 等），<a href="https://juejin.im/post/5b57dc9f6fb9a04fb136e91e" target="_blank" rel="noopener noreferrer">这篇文章<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>里面介绍了很多免费的静态页面托管服务。</p></div> <h2 id="github-actions-自动构建-部署"><a href="#github-actions-自动构建-部署" class="header-anchor">#</a> GitHub Actions 自动构建/部署</h2> <blockquote><p>大家有注意到 GitHub 悄悄上线了一个 Actions 功能吗？还不了解的同学可以看<a href="https://zhuanlan.zhihu.com/p/77751445" target="_blank" rel="noopener noreferrer">这篇文章<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，写的非常全面。</p></blockquote> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>GitHub 官方号称 Actions 可以让你的<strong>工作流自动化</strong>：GitHub 监听某个事件（可能是某个分支的提交），然后触发你预定义的工作流，让大家在GitHub服务器上直接测试代码、部署代码。所以，我们可以利用这里特性来做 CI/CD，开发者只要写一下 workflow 脚本就可以了，不用费心思去想要用哪个第三方的 CI/CD 服务, 💯。</p></div> <p>actions 其实就是由一些脚本组成，所以它们是可以复用的，GitHub 做了一个官方市场，可以搜索到他人提交的 actions。另外，还有一个 awesome actions 的仓库，也可以找到不少 action。这样一来，你甚至都不用自己写具体的脚本，直接引用别人的脚本就行啦。</p> <p>话不多说，赶紧用起来！</p> <h3 id="写-workflow-脚本"><a href="#写-workflow-脚本" class="header-anchor">#</a> 写 workflow 脚本</h3> <p>首先我们需要到项目仓库的页面上进入 Actions 这个 tab, 选择 Node 环境进入脚本的编辑页面
<img src="https://user-images.githubusercontent.com/16002911/69306766-9e93bf80-0c63-11ea-8ff8-3c51058cded0.png" alt="image"> <img src="https://user-images.githubusercontent.com/16002911/69306808-c2ef9c00-0c63-11ea-8c0e-37e385fb3f16.png" alt="image"></p> <p>这里我直接使用了 peaceiris 的 <a href="https://github.com/peaceiris/actions-gh-pages" target="_blank" rel="noopener noreferrer"><code>actions-gh-pages</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，这个 <code>action</code> 可以帮你把打包好的静态文件部署到 <code>GitHub Pages</code> 上去。</p> <p>最终我的 workflow 脚本如下：
<img src="https://user-images.githubusercontent.com/16002911/69312573-52984900-0c6a-11ea-9d4c-92d477410d6e.png" alt="image"> <a href="https://github.com/fyz1994/notes/blob/master/.github/workflows/deploy.yml" target="_blank" rel="noopener noreferrer">脚本源文件<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>更详细的语法可以去看 <a href="https://help.github.com/en/actions/automating-your-workflow-with-github-actions/events-that-trigger-workflows" target="_blank" rel="noopener noreferrer">GitHub Actions 的官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="设置-workflow-的环境变量"><a href="#设置-workflow-的环境变量" class="header-anchor">#</a> 设置 workflow 的环境变量</h3> <p>上面的脚本里面第21行的环境变量是怎么回事呢？
<img src="https://user-images.githubusercontent.com/16002911/69312974-482a7f00-0c6b-11ea-828c-8780aaafdf92.png" alt="image"></p> <p>因为我们需要 GitHub actions 把构建成果发到 GitHub 仓库，因此需要 GitHub 密钥，相当于是给 GitHub actions 授权。</p> <p>首先运行下面的命令生成一对密钥：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>ssh-keygen -t rsa -b <span class="token number">4096</span> -C <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> config user.email<span class="token variable">)</span></span>&quot;</span> -f gh-pages -N <span class="token string">&quot;&quot;</span>
<span class="token comment"># You will get 2 files:</span>
<span class="token comment">#   gh-pages.pub (public key)</span>
<span class="token comment">#   gh-pages     (private key)</span>
</code></pre></div><p>然后：</p> <ol><li>在博客项目的仓库的 Settings 栏下，找到 <code>Deploy keys</code>这一项，把你的公钥加进去，<strong>注意勾选<code>Allow write access</code></strong></li> <li>同样在博客项目的仓库的 Settings 栏下，找到 <code>Secrets</code>这一项，把你的私钥加进去
<img src="https://user-images.githubusercontent.com/16002911/69307473-b4a27f80-0c65-11ea-908c-c8da810709fb.png" alt="image"></li></ol> <h3 id="注意事项："><a href="#注意事项：" class="header-anchor">#</a> 注意事项：</h3> <ol><li>大家还记得前面我们说 vuepress 可以全局安装吗？如果你要使用 GitHub Actions 来帮你自动构建/部署 Vuepress 博客，那你就要把 <code>Vuepress</code> 作为你的开发依赖加入到项目的 <code>package.json</code> 文件里面进行管理，否则在 GitHub 的 docker 容器里打包的时候会找不到 <code>Vuepress</code> 这个命令。</li> <li>同样的，因为我们使用了 GitHub Actions，所以如果你前面使用了 yarn 来作为包管理工具，最好换成 npm，因为 npm 是 node 环境自带的包管理工具，无需额外安装，另外， peaceiris 的 <a href="https://github.com/peaceiris/actions-gh-pages" target="_blank" rel="noopener noreferrer"><code>actions-gh-pages</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 也是使用 npm 作为包管理工具的。</li> <li>使用 <code>npm ci</code> 来安装依赖包，而不是 <code>npm install</code></li></ol> <div class="custom-block tip"><p class="custom-block-title">npm ci 和 npm i 的区别</p> <p>可以看 medium 上的<a href="https://medium.com/better-programming/npm-ci-vs-npm-install-which-should-you-use-in-your-node-js-projects-51e07cb71e26" target="_blank" rel="noopener noreferrer">这篇文章<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 了解一下。</p> <p>简单来说就是：不像<code>npm install</code>，<code>npm ci</code>永远不会修改您的<code>package-lock.json</code>，它的使用依赖于 <code>package-lock.json</code>文件。所以如果使用npm ci，您将获得可靠的版本。通常这个命令会在 <code>Jenkins</code>或<code>GitLab CI</code>之类的持续集成工具中使用。</p></div> <p>好了，这样每次你的项目 <code>master</code> 分支一旦有新的提交，就会自动触发这个 workflow，就可以自动完成静态博客的构建和部署了～</p> <p>也就是说，我们可以直接利用 GitHub 的 markdown 编辑器，直接新建一个文档进行协作，然后提交到 master 分支就行了，完全不用再次去做 git 提交以及本地的构建和部署，简直太方便了 🚀</p> <h2 id="给-vuepress-博客加上评论系统"><a href="#给-vuepress-博客加上评论系统" class="header-anchor">#</a> 给 Vuepress 博客加上评论系统</h2> <p>待补充...</p> <h2 id="给-vuepress-博客加上全文搜索"><a href="#给-vuepress-博客加上全文搜索" class="header-anchor">#</a> 给 Vuepress 博客加上全文搜索</h2> <p>待补充...</p> <h2 id="给-vuepress-博客做-seo-优化"><a href="#给-vuepress-博客做-seo-优化" class="header-anchor">#</a> 给 Vuepress 博客做 SEO 优化</h2> <p>待补充...</p> <div class="gitalk-container"><div id="gitalk-container"></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/fyz1994/notes/edit/master/docs/tool/tools/Vuepress 搭建博客全攻略.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/21/2019, 7:45:00 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/notes/assets/js/app.113899e4.js" defer></script><script src="/notes/assets/js/2.7a0e0dff.js" defer></script><script src="/notes/assets/js/20.ece02ac5.js" defer></script><script src="/notes/assets/js/3.d364b134.js" defer></script>
  </body>
</html>
